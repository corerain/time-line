<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link type="text/css" rel="stylesheet" href="./styles/index.css" >
  <title>Document</title>
</head>
<body>
  <div class="time-line-operation">
    <div class="day-line">
      <div class="line-title">
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
        <svg t="1646985285059" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7394" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></defs><path d="M426.666667 137.514667V225.706667A298.666667 298.666667 0 1 0 798.293333 597.333333h88.192A384 384 0 1 1 426.666667 137.514667zM512 85.333333c231.68 0 420.181333 184.618667 426.496 414.72L938.666667 512H512V85.333333z" p-id="7395" />
        </svg>
        <span>single day distribution</span>
      </div>
      <div id="day-line"></div>
    </div>
    <div class="time-line">
      <div class="line-title">
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
        <svg t="1646985289323" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7524" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
            <defs><style type="text/css"></style></defs>
            <path d="M597.333333 128a128 128 0 0 1 42.666667 248.704V853.333333h-85.333333V376.746667A128.042667 128.042667 0 0 1 597.333333 128z m-128 298.709333L170.666667 426.666667v256h85.333333v-128h85.333333v128h85.333334v-128h85.333333v213.333333H128a42.666667 42.666667 0 0 1-42.666667-42.666667V384a42.666667 42.666667 0 0 1 42.666667-42.666667h273.749333a214.101333 214.101333 0 0 0 67.626667 85.376zM896 341.333333a42.666667 42.666667 0 0 1 42.666667 42.666667v341.333333a42.666667 42.666667 0 0 1-42.666667 42.666667h-213.333333v-213.333333h85.333333v128h85.333333v-256l-128 0.042666a214.101333 214.101333 0 0 0 67.584-85.333333L896 341.333333z" p-id="7525" />
        </svg>
        <span>time line</span>
      </div>
      <div id="time-line"></div>
    </div>
  </div>
  <div class="time-line-button">
    <div class="time-line-button-block"  onclick="jumpDay('left')">
      <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1645407814587" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7249" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M469.333333 213.333333l64 64L298.666667 512l234.666666 234.666667L469.333333 810.666667l-298.666666-298.666667 298.666666-298.666667z m298.666667 0l64 64L597.333333 512l234.666667 234.666667L768 810.666667l-298.666667-298.666667 298.666667-298.666667z" p-id="7250"></path></svg>
      <span>The day before</span>
    </div>
    <div class="time-line-button-block right-button"  onclick="jumpDay('right')">
      <span>The day after</span>
      <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1646986146374" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7784" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M576 213.333333l298.666667 298.666667-298.666667 298.666667-64-64 234.666667-234.666667L512 277.333333 576 213.333333z m-298.666667 0l298.666667 298.666667-298.666667 298.666667L213.333333 746.666667l234.666667-234.666667L213.333333 277.333333 277.333333 213.333333z" p-id="7785"></path></svg>
    </div>
    <div class="time-line-button-middle">
      <div class="button-middle-block">
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1646986190754" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7914" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 85.333333c235.648 0 426.666667 191.018667 426.666667 426.666667s-191.018667 426.666667-426.666667 426.666667S85.333333 747.648 85.333333 512 276.352 85.333333 512 85.333333z m0 85.333334a341.333333 341.333333 0 1 0 0 682.666666 341.333333 341.333333 0 0 0 0-682.666666z m42.666667 85.333333v213.333333h170.666666v85.333334h-256V256h85.333334z" p-id="7915"></path></svg>
        <span class="button-middle-text text-date" >2012/11/15</span>
        <span class="button-middle-text text-time" >20:35:24</span>
      </div>
      <div class="back-to-now" onclick="backToNow()">
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1650795241429" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7478" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M210.304 89.6l97.28 97.28a384 384 0 1 1-128.170667 517.162667l73.898667-42.666667A298.666667 298.666667 0 1 0 369.92 249.173333l81.749333 81.792-301.696 60.373334L210.304 89.6zM512 384a128 128 0 1 1 0 256 128 128 0 0 1 0-256z" p-id="7479"></path></svg>
      </div>
    </div>
  </div>
  <div class="callback-data"></div>
</body>

<script type="module">
  import TimeLine from './timeline.js'

  let timeline = null

  const buttons = {
    left: {
      disabled: false,
      target: null
    },
    right: {
      disabled: true,
      target: null
    }
  }

  const setPointerTime = time => {
    const textDate = document.querySelector('.text-date')
    const textTime = document.querySelector('.text-time')
    textDate.innerHTML = time.format('YYYY/MM/DD')
    textTime.innerHTML = time.format('HH:mm:ss')

    buttons.left.target = time.subtract(24, 'h').startOf('day')
    buttons.right.target = time.add(24, 'h').startOf('day').add(1, 's')

    const nowZero = timeline.dayjs().startOf('day')
    buttons.right.disabled = nowZero.isSame(time) || nowZero.isBefore(time)

    const rightButton = document.querySelector('.right-button')
    rightButton.className = buttons.right.disabled ? 'time-line-button-block right-button is-disabled' : 'time-line-button-block right-button'
  }

  const setPointerVideoList = list => {
    const callbackData = document.querySelector('.callback-data')
    callbackData.innerHTML = JSON.stringify(list)
  }

  function setTimeLine() {
    const now = Math.floor(Date.now() / 1000)

    const option = {
      container: document.querySelector('#time-line'),
      dayContainer: document.querySelector('#day-line'),
      pointerColor: 'rgba(255, 58, 51, 1)',
      record: [
        {
          start: now + 30,
          duration: 2400,
          info: '11111'
        },
        {
          start: now + 3600,
          duration: 1800,
          info: '2222'
        }
      ],
      pointerTimeCallback: setPointerTime,
      pointerBlockDataCallback: setPointerVideoList
    }

    timeline = new TimeLine(option)
  }

  setTimeLine()

  window.backToNow = () => {
    const endTime = timeline.dayjs()

    timeline.jumpTime(endTime)
  }

  window.jumpDay =  direction => {
    const button = buttons[direction]

    if (button.disabled) return
    button.target && timeline.jumpTime(button.target)
  }
</script>
</html>

